<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pharmacity - Farmácia Delivery</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <!-- Animate.css for animations -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <style>
      :root {
        --primary-color: #e50914;
        --primary-dark: #b2070f;
        --secondary-color: #00b4d8;
        --dark-bg: #141414;
        --dark-card: #1f1f1f;
        --text-light: #e5e5e5;
        --text-gray: #808080;
      }

      body {
        font-family: "Inter", sans-serif;
        background-color: var(--dark-bg);
        color: var(--text-light);
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #282828;
      }
      ::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: var(--primary-color);
      }

      /* Loading Animation */
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      /* Product Card Hover Effect */
      .product-card {
        transition: all 0.3s ease;
        transform-origin: center;
      }

      .product-card:hover {
        transform: translateY(-5px) scale(1.03);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      /* Floating Cart Animation */
      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      .cart-bounce {
        animation: bounce 2s infinite;
      }

      /* Badge Animation */
      .badge-pulse {
        animation: pulse 1.5s infinite;
      }

      /* Responsive Grid */
      @media (min-width: 768px) {
        .product-grid {
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }
      }

      /* Toast Notification */
      .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--primary-color);
        color: white;
        padding: 12px 24px;
        border-radius: 4px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .toast.show {
        transform: translateY(0);
        opacity: 1;
      }

      /* Discount Badge */
      .discount-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: var(--secondary-color);
        color: white;
        font-weight: bold;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
      }
    </style>
  </head>
  <body class="antialiased">
    <!-- Loading Screen -->
    <div
      id="loadingScreen"
      class="fixed inset-0 bg-black bg-opacity-90 flex flex-col items-center justify-center z-50"
    >
      <div
        class="w-16 h-16 border-4 border-t-primary border-r-primary border-b-transparent border-l-transparent rounded-full animate-spin mb-4"
      ></div>
      <p id="loadingMessage" class="text-white text-lg">
        Carregando produtos...
      </p>
      <div
        id="loadingProgress"
        class="w-64 bg-gray-700 rounded-full h-2.5 mt-4"
      >
        <div class="bg-primary h-2.5 rounded-full" style="width: 0%"></div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
      <div class="flex items-center">
        <i id="toastIcon" class="fas fa-check-circle mr-2"></i>
        <span id="toastMessage"></span>
      </div>
    </div>

    <!-- Header -->
    <header
      class="bg-black bg-opacity-90 p-4 sticky top-0 z-40 shadow-lg backdrop-blur-sm"
    >
      <div
        class="container mx-auto flex flex-wrap items-center justify-between gap-4"
      >
        <!-- Logo e Nome da Farmácia -->
      <div class="flex items-center flex-shrink-0">
  <img
    src="./image/logofarma.png"
    alt="Logo"

    class="rounded-full h-12 w-12 mr-6" 
  />
  <div class="flex flex-col">
    <h1 class="text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
      Pharmacity
    </h1>
    <span class="text-xs text-gray-300 font-medium tracking-wide">
      Sejá muito bem-vindo a sua fármacia!
    </span>
    <br>
  </div>
</div>
    </div>
    </div>

        <!-- Barra de Pesquisa -->
        <div
          class="relative flex-grow max-w-md w-full mx-auto order-3 md:order-none"
        >
          <input
            type="text"
            id="searchInput"
            placeholder="Buscar medicamentos..."
            class="w-full pl-10 pr-4 py-2 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary border border-transparent focus:border-primary transition-all duration-300"
          />
          <i
            class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"
          ></i>
          <button
            id="clearSearch"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white hidden"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>

        <!-- Navegação -->
        <nav
          class="flex items-center gap-4 flex-shrink-0 order-2 md:order-none"
        >
          <button
            id="categoriesBtn"
            class="text-white hover:text-primary transition whitespace-nowrap"
          >
            <i class="fas fa-bars mr-1"></i> Categorias
          </button>
          <button id="userBtn" class="text-white hover:text-primary transition">
            <i class="fas fa-user"></i>
          </button>
        </nav>
      </div>
    </header>

    <!-- Categories Dropdown -->
    <div
      id="categoriesDropdown"
      class="hidden absolute top-full left-0 right-0 bg-gray-900 shadow-lg z-30 p-4"
    >
      <div
        class="container mx-auto grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"
      >
        <a
          href="#"
          class="category-chip bg-gray-800 hover:bg-primary text-white px-4 py-2 rounded-full text-sm transition flex items-center"
        >
          <i class="fas fa-pills mr-2"></i> Medicamentos
        </a>
        <a
          href="#"
          class="category-chip bg-gray-800 hover:bg-primary text-white px-4 py-2 rounded-full text-sm transition flex items-center"
        >
          <i class="fas fa-heart mr-2"></i> Vitaminas
        </a>
        <a
          href="#"
          class="category-chip bg-gray-800 hover:bg-primary text-white px-4 py-2 rounded-full text-sm transition flex items-center"
        >
          <i class="fas fa-soap mr-2"></i> Higiene
        </a>
        <a
          href="#"
          class="category-chip bg-gray-800 hover:bg-primary text-white px-4 py-2 rounded-full text-sm transition flex items-center"
        >
          <i class="fas fa-baby mr-2"></i> Infantil
        </a>
        <a
          href="#"
          class="category-chip bg-gray-800 hover:bg-primary text-white px-4 py-2 rounded-full text-sm transition flex items-center"
        >
          <i class="fas fa-band-aid mr-2"></i> Primeiros Socorros
        </a>
        <a
          href="#"
          class="category-chip bg-gray-800 hover:bg-primary text-white px-4 py-2 rounded-full text-sm transition flex items-center"
        >
          <i class="fas fa-prescription-bottle mr-2"></i> Genéricos
        </a>
      </div>
    </div>

    <!-- Hero Banner com Destaque -->
    <section
      class="relative h-[400px] md:h-[500px] bg-cover bg-center flex items-center justify-start px-6"
      style="
        background-image: url('https://img.freepik.com/fotos-gratis/frascos-de-medicamentos-comprimidos-e-estetoscopio_23-2148829261.jpg');
      "
    >
      <!-- Máscara escura moderna -->
      <div class="absolute inset-0 bg-black/70"></div>

      <!-- Conteúdo do banner -->
      <div class="relative z-10 max-w-2xl text-left">
        <span
          class="bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block shadow-md"
        >
          PROMOÇÃO
        </span>
        <h2
          class="text-3xl md:text-5xl font-extrabold text-white leading-tight drop-shadow-xl"
        >
          Até 30% de desconto<br />em medicamentos selecionados
        </h2>
        <p class="text-gray-200 text-base md:text-lg mt-4 mb-6 drop-shadow-md">
          Frete grátis para pedidos acima de <strong>R$ 100,00</strong>
        </p>
        <button
          class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg shadow-lg transition flex items-center"
        >
          Ver Ofertas <i class="fas fa-arrow-right ml-2"></i>
        </button>
      </div>
    </section>

    <!-- Featured Categories -->
    <section class="py-8 bg-gray-900">
      <div class="container mx-auto px-4">
        <h3 class="text-2xl font-bold mb-6 flex items-center">
          <i class="fas fa-star mr-2 text-yellow-400"></i> Destaques
        </h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <a
            href="#"
            class="featured-category bg-gray-800 hover:bg-gray-700 rounded-lg p-4 transition flex flex-col items-center"
          >
            <div
              class="w-16 h-16 bg-primary bg-opacity-20 rounded-full flex items-center justify-center mb-3"
            >
              <i class="fas fa-pills text-primary text-2xl"></i>
            </div>
            <span class="text-white font-medium">Medicamentos</span>
            <span class="text-xs text-gray-400 mt-1">+50 itens</span>
          </a>
          <a
            href="#"
            class="featured-category bg-gray-800 hover:bg-gray-700 rounded-lg p-4 transition flex flex-col items-center"
          >
            <div
              class="w-16 h-16 bg-blue-500 bg-opacity-20 rounded-full flex items-center justify-center mb-3"
            >
              <i class="fas fa-heart text-blue-400 text-2xl"></i>
            </div>
            <span class="text-white font-medium">Vitaminas</span>
            <span class="text-xs text-gray-400 mt-1">+30 itens</span>
          </a>
          <a
            href="#"
            class="featured-category bg-gray-800 hover:bg-gray-700 rounded-lg p-4 transition flex flex-col items-center"
          >
            <div
              class="w-16 h-16 bg-green-500 bg-opacity-20 rounded-full flex items-center justify-center mb-3"
            >
              <i class="fas fa-baby text-green-400 text-2xl"></i>
            </div>
            <span class="text-white font-medium">Infantil</span>
            <span class="text-xs text-gray-400 mt-1">+25 itens</span>
          </a>
          <a
            href="#"
            class="featured-category bg-gray-800 hover:bg-gray-700 rounded-lg p-4 transition flex flex-col items-center"
          >
            <div
              class="w-16 h-16 bg-purple-500 bg-opacity-20 rounded-full flex items-center justify-center mb-3"
            >
              <i
                class="fas fa-prescription-bottle text-purple-400 text-2xl"
              ></i>
            </div>
            <span class="text-white font-medium">Genéricos</span>
            <span class="text-xs text-gray-400 mt-1">Economize</span>
          </a>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <main class="container mx-auto py-8 px-4">
      <!-- Category Filter -->
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold">Produtos</h3>
        <div class="flex space-x-2">
          <button
            id="filterBtn"
            class="bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition flex items-center"
          >
            <i class="fas fa-filter mr-2"></i> Filtrar
          </button>
          <button
            id="sortBtn"
            class="bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition flex items-center"
          >
            <i class="fas fa-sort mr-2"></i> Ordenar
          </button>
        </div>
      </div>

      <!-- Filter Panel (Hidden by default) -->
      <div id="filterPanel" class="hidden bg-gray-800 rounded-lg p-4 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <h4 class="font-bold mb-3 text-white">Categorias</h4>
            <div class="space-y-2">
              <label class="flex items-center">
                <input
                  type="checkbox"
                  class="form-checkbox text-primary rounded"
                  checked
                />
                <span class="ml-2 text-gray-300">Medicamentos</span>
              </label>
              <label class="flex items-center">
                <input
                  type="checkbox"
                  class="form-checkbox text-primary rounded"
                  checked
                />
                <span class="ml-2 text-gray-300">Vitaminas</span>
              </label>
              <label class="flex items-center">
                <input
                  type="checkbox"
                  class="form-checkbox text-primary rounded"
                  checked
                />
                <span class="ml-2 text-gray-300">Higiene</span>
              </label>
            </div>
          </div>
          <div>
            <h4 class="font-bold mb-3 text-white">Preço</h4>
            <div class="space-y-4">
              <div>
                <input
                  type="range"
                  min="0"
                  max="200"
                  value="200"
                  class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"
                />
                <div class="flex justify-between text-xs text-gray-400 mt-1">
                  <span>R$ 0</span>
                  <span>R$ 200+</span>
                </div>
              </div>
            </div>
          </div>
          <div>
            <h4 class="font-bold mb-3 text-white">Outros Filtros</h4>
            <div class="space-y-2">
              <label class="flex items-center">
                <input
                  type="checkbox"
                  class="form-checkbox text-primary rounded"
                />
                <span class="ml-2 text-gray-300">Com desconto</span>
              </label>
              <label class="flex items-center">
                <input
                  type="checkbox"
                  class="form-checkbox text-primary rounded"
                />
                <span class="ml-2 text-gray-300">Entrega rápida</span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Products Grid -->
      <div
        id="productsContainer"
        class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"
      >
        <!-- Products will be loaded here dynamically -->
      </div>

      <!-- Pagination -->
      <div class="flex justify-center mt-8">
        <nav class="inline-flex rounded-md shadow">
          <a
            href="#"
            class="px-3 py-2 rounded-l-md bg-gray-800 text-gray-300 hover:bg-gray-700"
          >
            <i class="fas fa-chevron-left"></i>
          </a>
          <a
            href="#"
            class="px-3 py-2 bg-gray-800 text-gray-300 hover:bg-gray-700 border-l border-gray-700"
            >1</a
          >
          <a
            href="#"
            class="px-3 py-2 bg-gray-800 text-gray-300 hover:bg-gray-700 border-l border-gray-700"
            >2</a
          >
          <a
            href="#"
            class="px-3 py-2 bg-gray-800 text-gray-300 hover:bg-gray-700 border-l border-gray-700"
            >3</a
          >
          <a
            href="#"
            class="px-3 py-2 rounded-r-md bg-gray-800 text-gray-300 hover:bg-gray-700 border-l border-gray-700"
          >
            <i class="fas fa-chevron-right"></i>
          </a>
        </nav>
      </div>
    </main>

    <!-- Floating Cart Button -->
    <div
      id="cartButton"
      class="fixed bottom-6 right-6 bg-primary hover:bg-primary-dark text-white p-4 rounded-full shadow-xl cursor-pointer transition-all duration-300 z-40 cart-bounce"
    >
      <i class="fas fa-shopping-cart text-xl"></i>
      <span
        id="cartBadge"
        class="absolute -top-2 -right-2 bg-secondary text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center"
        >0</span
      >
    </div>

    <!-- Cart Sidebar -->
    <div
      id="cartSidebar"
      class="fixed top-0 right-0 h-full w-full md:w-96 bg-gray-900 shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out z-50 overflow-y-auto"
    >
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-xl font-bold flex items-center">
            <i class="fas fa-shopping-cart mr-2"></i> Seu Carrinho
          </h3>
          <button id="closeCart" class="text-gray-400 hover:text-white">
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>

        <div id="cartItems" class="space-y-4">
          <!-- Cart items will be loaded here -->
          <div id="emptyCart" class="text-center py-10">
            <i class="fas fa-shopping-cart text-4xl text-gray-600 mb-4"></i>
            <p class="text-gray-400">Seu carrinho está vazio</p>
            <button
              class="mt-4 bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-lg transition"
            >
              Ver produtos
            </button>
          </div>
        </div>

        <div class="border-t border-gray-700 mt-6 pt-4">
          <div class="flex justify-between mb-2">
            <span class="text-gray-400">Subtotal:</span>
            <span id="cartSubtotal" class="text-white">R$ 0,00</span>
          </div>
          <div class="flex justify-between mb-2">
            <span class="text-gray-400">Frete:</span>
            <span id="cartShipping" class="text-white">-</span>
          </div>
          <div
            class="flex justify-between text-lg font-bold mt-4 pt-2 border-t border-gray-700"
          >
            <span>Total:</span>
            <span id="cartTotal" class="text-primary">R$ 0,00</span>
          </div>

          <button
            id="checkoutBtn"
            class="w-full bg-primary hover:bg-primary-dark text-white font-bold py-3 px-4 rounded-lg mt-6 transition flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
            disabled
          >
            <i class="fas fa-whatsapp mr-2"></i> Finalizar via WhatsApp
          </button>

          <p class="text-xs text-gray-500 mt-4 text-center">
            <i class="fas fa-lock mr-1"></i> Seus dados estão seguros
          </p>
        </div>
      </div>
    </div>

    <!-- User Modal -->
    <div
      id="userModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
    >
      <div class="bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold">Minha Conta</h3>
          <button id="closeUserModal" class="text-gray-400 hover:text-white">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="space-y-4">
          <div class="flex items-center space-x-4">
            <div
              class="w-16 h-16 rounded-full bg-primary flex items-center justify-center text-2xl font-bold"
            >
              <i class="fas fa-user"></i>
            </div>
            <div>
              <h4 class="font-bold">Visitante</h4>
              <p class="text-sm text-gray-400">Entre ou cadastre-se</p>
            </div>
          </div>

          <div class="border-t border-gray-700 pt-4">
            <button
              class="w-full bg-primary hover:bg-primary-dark text-white py-2 px-4 rounded-lg mb-3"
            >
              Entrar
            </button>
            <button
              class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg"
            >
              Cadastrar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h4 class="text-white font-bold mb-4">Pharmacity</h4>
            <p class="text-sm mb-4">
              Sua farmácia digital com entrega rápida e preços competitivos.
            </p>
            <div class="flex space-x-4">
              <a href="#" class="text-gray-400 hover:text-white">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="text-gray-400 hover:text-white">
                <i class="fab fa-instagram"></i>
              </a>
              <a href="#" class="text-gray-400 hover:text-white">
                <i class="fab fa-whatsapp"></i>
              </a>
            </div>
          </div>
          <div>
            <h4 class="text-white font-bold mb-4">Links Rápidos</h4>
            <ul class="space-y-2">
              <li><a href="#" class="hover:text-white transition">Home</a></li>
              <li>
                <a href="#" class="hover:text-white transition">Produtos</a>
              </li>
              <li>
                <a href="#" class="hover:text-white transition">Ofertas</a>
              </li>
              <li>
                <a href="#" class="hover:text-white transition">Sobre Nós</a>
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-white font-bold mb-4">Ajuda</h4>
            <ul class="space-y-2">
              <li><a href="#" class="hover:text-white transition">FAQ</a></li>
              <li>
                <a href="#" class="hover:text-white transition">Entrega</a>
              </li>
              <li>
                <a href="#" class="hover:text-white transition">Pagamentos</a>
              </li>
              <li>
                <a href="#" class="hover:text-white transition">Contato</a>
              </li>
            </ul>
          </div>
          <div>
            <h4 class="text-white font-bold mb-4">Newsletter</h4>
            <p class="text-sm mb-4">
              Cadastre-se para receber ofertas exclusivas.
            </p>
            <div class="flex">
              <input
                type="email"
                placeholder="Seu e-mail"
                class="bg-gray-800 text-white px-4 py-2 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-primary w-full"
              />
              <button
                class="bg-primary hover:bg-primary-dark text-white px-4 py-2 rounded-r-lg"
              >
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="border-t border-gray-800 mt-8 pt-8 text-sm text-center">
          <p>&copy; 2023 Pharmacity. Todos os direitos reservados.</p>
        </div>
      </div>
    </footer>

    <script>
      // Configuration
      const WHATSAPP_NUMBER = "5511999999999";
      const SHIPPING_FEE = 9.99;
      const FREE_SHIPPING_THRESHOLD = 100;

      // State
      let products = [];
      let cart = [];
      let filters = {
        category: [],
        priceRange: [0, 200],
        onlyDiscount: false,
      };

      // DOM Elements
      const loadingScreen = document.getElementById("loadingScreen");
      const loadingProgress = document.getElementById("loadingProgress");
      const productsContainer = document.getElementById("productsContainer");
      const cartButton = document.getElementById("cartButton");
      const cartSidebar = document.getElementById("cartSidebar");
      const closeCart = document.getElementById("closeCart");
      const cartItems = document.getElementById("cartItems");
      const emptyCart = document.getElementById("emptyCart");
      const cartBadge = document.getElementById("cartBadge");
      const cartSubtotal = document.getElementById("cartSubtotal");
      const cartShipping = document.getElementById("cartShipping");
      const cartTotal = document.getElementById("cartTotal");
      const checkoutBtn = document.getElementById("checkoutBtn");
      const searchInput = document.getElementById("searchInput");
      const clearSearch = document.getElementById("clearSearch");
      const filterBtn = document.getElementById("filterBtn");
      const filterPanel = document.getElementById("filterPanel");
      const categoriesBtn = document.getElementById("categoriesBtn");
      const categoriesDropdown = document.getElementById("categoriesDropdown");
      const userBtn = document.getElementById("userBtn");
      const userModal = document.getElementById("userModal");
      const closeUserModal = document.getElementById("closeUserModal");
      const toast = document.getElementById("toast");
      const toastMessage = document.getElementById("toastMessage");
      const toastIcon = document.getElementById("toastIcon");

      // Initialize the app
      document.addEventListener("DOMContentLoaded", () => {
        // Simulate loading products
        simulateLoading();

        // Setup event listeners
        setupEventListeners();
      });

      // Simulate loading products with progress
      function simulateLoading() {
        let progress = 0;
        const interval = setInterval(() => {
          progress += Math.random() * 10;
          if (progress >= 100) {
            progress = 100;
            clearInterval(interval);
            setTimeout(() => {
              loadingScreen.classList.add("hidden");
              loadProducts();
            }, 500);
          }
          loadingProgress.firstElementChild.style.width = `${progress}%`;
        }, 200);
      }

      // Load products (mock data for demonstration)
      function loadProducts() {
        // Mock data - in a real app, this would come from an API
        products = [
          {
            id: 1,
            name: "Paracetamol 500mg",
            price: 12.5,
            discountPrice: 10.0,
            category: "medicamentos",
            image:
              "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Paracetamol",
            hasDiscount: true,
          },
          {
            id: 2,
            name: "Dipirona 300mg",
            price: 9.99,
            category: "medicamentos",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Dipirona",
          },
          {
            id: 3,
            name: "Amoxicilina 500mg",
            price: 35.0,
            category: "medicamentos",
            image:
              "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Amoxicilina",
          },
          {
            id: 4,
            name: "Dorflex",
            price: 15.0,
            discountPrice: 12.5,
            category: "medicamentos",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Dorflex",
            hasDiscount: true,
          },
          {
            id: 5,
            name: "Vitamina C 1g",
            price: 22.0,
            category: "vitaminas",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Vitamina+C",
          },
          {
            id: 6,
            name: "Ômega 3",
            price: 45.0,
            discountPrice: 39.9,
            category: "vitaminas",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Omega+3",
            hasDiscount: true,
          },
          {
            id: 7,
            name: "Shampoo Anti-queda",
            price: 28.9,
            category: "higiene",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Shampoo",
          },
          {
            id: 8,
            name: "Creme Dental Colgate",
            price: 5.5,
            category: "higiene",
            image:
              "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Creme+Dental",
          },
          {
            id: 9,
            name: "Protetor Solar FPS 50",
            price: 60.0,
            discountPrice: 54.9,
            category: "higiene",
            image:
              "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Protetor+Solar",
            hasDiscount: true,
          },
          {
            id: 10,
            name: "Sabonete Líquido",
            price: 18.0,
            category: "higiene",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Sabonete",
          },
          {
            id: 11,
            name: "Complexo B",
            price: 30.0,
            category: "vitaminas",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Complexo+B",
          },
          {
            id: 12,
            name: "Magnésio Dimalato",
            price: 55.0,
            category: "vitaminas",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Magnesio",
          },
          {
            id: 13,
            name: "Termômetro Digital",
            price: 25.0,
            discountPrice: 19.9,
            category: "equipamentos",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Termometro",
            hasDiscount: true,
          },
          {
            id: 14,
            name: "Álcool em Gel 70%",
            price: 8.0,
            category: "higiene",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Alcool+Gel",
          },
          {
            id: 15,
            name: "Band-aid",
            price: 6.5,
            category: "primeiros-socorros",
            image: "https://placehold.co/300x300/1F1F1F/FFFFFF?text=Band-aid",
          },
        ];

        renderProducts(products);
      }

      // Render products to the DOM
      function renderProducts(productsToRender) {
        productsContainer.innerHTML = "";

        if (productsToRender.length === 0) {
          productsContainer.innerHTML = `
                    <div class="col-span-full text-center py-10">
                        <i class="fas fa-search text-4xl text-gray-600 mb-4"></i>
                        <p class="text-gray-400">Nenhum produto encontrado</p>
                    </div>
                `;
          return;
        }

        productsToRender.forEach((product) => {
          const productCard = document.createElement("div");
          productCard.className =
            "product-card bg-gray-800 rounded-lg overflow-hidden shadow-md border border-gray-700";
          productCard.innerHTML = `
                    <div class="relative">
                        <img src="${product.image}" alt="${
            product.name
          }" class="w-full h-40 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/300x300/1F1F1F/FFFFFF?text=Produto';">
                        ${
                          product.hasDiscount
                            ? `<span class="discount-badge">${Math.round(
                                (1 - product.discountPrice / product.price) *
                                  100
                              )}% OFF</span>`
                            : ""
                        }
                        <button class="absolute bottom-2 right-2 bg-primary hover:bg-primary-dark text-white p-2 rounded-full shadow-lg transition" onclick="addToCart(${
                          product.id
                        })">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="p-4">
                        <h4 class="text-sm font-semibold text-white mb-1 truncate">${
                          product.name
                        }</h4>
                        <div class="flex items-center">
                            ${
                              product.hasDiscount
                                ? `
                                <span class="text-primary font-bold">R$ ${product.discountPrice
                                  .toFixed(2)
                                  .replace(".", ",")}</span>
                                <span class="text-xs text-gray-400 line-through ml-2">R$ ${product.price
                                  .toFixed(2)
                                  .replace(".", ",")}</span>
                            `
                                : `
                                <span class="text-white font-bold">R$ ${product.price
                                  .toFixed(2)
                                  .replace(".", ",")}</span>
                            `
                            }
                        </div>
                    </div>
                `;
          productsContainer.appendChild(productCard);
        });
      }

      // Add product to cart
      function addToCart(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        const existingItem = cart.find((item) => item.product.id === productId);
        if (existingItem) {
          existingItem.quantity++;
        } else {
          cart.push({
            product: product,
            quantity: 1,
          });
        }

        updateCart();
        showToast("Produto adicionado ao carrinho", "success");
      }

      // Update cart UI
      function updateCart() {
        // Update badge
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartBadge.textContent = totalItems;

        if (totalItems > 0) {
          cartBadge.classList.remove("hidden");
          if (totalItems > 9) cartBadge.classList.add("badge-pulse");
          else cartBadge.classList.remove("badge-pulse");
        } else {
          cartBadge.classList.add("hidden");
        }

        // Update cart items
        if (cart.length === 0) {
          emptyCart.classList.remove("hidden");
          cartItems.innerHTML = "";
          cartItems.appendChild(emptyCart);
          checkoutBtn.disabled = true;
        } else {
          emptyCart.classList.add("hidden");

          cartItems.innerHTML = "";
          let subtotal = 0;

          cart.forEach((item) => {
            const price = item.product.hasDiscount
              ? item.product.discountPrice
              : item.product.price;
            subtotal += price * item.quantity;

            const cartItem = document.createElement("div");
            cartItem.className = "bg-gray-800 rounded-lg p-3 flex items-start";
            cartItem.innerHTML = `
                        <img src="${item.product.image}" alt="${
              item.product.name
            }" class="w-16 h-16 object-cover rounded mr-3" onerror="this.onerror=null;this.src='https://placehold.co/100x100/1F1F1F/FFFFFF?text=Produto';">
                        <div class="flex-grow">
                            <h5 class="font-medium text-white">${
                              item.product.name
                            }</h5>
                            <p class="text-sm text-gray-400">${
                              item.product.hasDiscount
                                ? `R$ ${item.product.discountPrice
                                    .toFixed(2)
                                    .replace(".", ",")}`
                                : `R$ ${item.product.price
                                    .toFixed(2)
                                    .replace(".", ",")}`
                            }</p>
                            <div class="flex items-center mt-2">
                                <button class="quantity-btn bg-gray-700 text-white rounded w-6 h-6 flex items-center justify-center" onclick="updateQuantity(${
                                  item.product.id
                                }, 'decrease')">
                                    <i class="fas fa-minus text-xs"></i>
                                </button>
                                <span class="mx-2 text-white">${
                                  item.quantity
                                }</span>
                                <button class="quantity-btn bg-primary text-white rounded w-6 h-6 flex items-center justify-center" onclick="updateQuantity(${
                                  item.product.id
                                }, 'increase')">
                                    <i class="fas fa-plus text-xs"></i>
                                </button>
                                <button class="ml-auto text-gray-400 hover:text-red-500" onclick="removeFromCart(${
                                  item.product.id
                                })">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    `;
            cartItems.appendChild(cartItem);
          });

          // Calculate shipping
          const shipping =
            subtotal >= FREE_SHIPPING_THRESHOLD ? 0 : SHIPPING_FEE;
          const total = subtotal + shipping;

          // Update totals
          cartSubtotal.textContent = `R$ ${subtotal
            .toFixed(2)
            .replace(".", ",")}`;
          cartShipping.textContent =
            shipping === 0
              ? "Grátis"
              : `R$ ${shipping.toFixed(2).replace(".", ",")}`;
          cartTotal.textContent = `R$ ${total.toFixed(2).replace(".", ",")}`;

          checkoutBtn.disabled = false;
        }
      }

      // Update item quantity in cart
      function updateQuantity(productId, action) {
        const itemIndex = cart.findIndex(
          (item) => item.product.id === productId
        );
        if (itemIndex === -1) return;

        if (action === "increase") {
          cart[itemIndex].quantity++;
        } else if (action === "decrease") {
          cart[itemIndex].quantity--;
          if (cart[itemIndex].quantity <= 0) {
            cart.splice(itemIndex, 1);
          }
        }

        updateCart();
      }

      // Remove item from cart
      function removeFromCart(productId) {
        cart = cart.filter((item) => item.product.id !== productId);
        updateCart();
        showToast("Produto removido do carrinho", "warning");
      }

      // Show toast notification
      function showToast(message, type) {
        toastMessage.textContent = message;

        // Set icon and color based on type
        switch (type) {
          case "success":
            toastIcon.className = "fas fa-check-circle mr-2";
            toast.className = "toast bg-green-600";
            break;
          case "error":
            toastIcon.className = "fas fa-exclamation-circle mr-2";
            toast.className = "toast bg-red-600";
            break;
          case "warning":
            toastIcon.className = "fas fa-exclamation-triangle mr-2";
            toast.className = "toast bg-yellow-600";
            break;
          default:
            toastIcon.className = "fas fa-info-circle mr-2";
            toast.className = "toast bg-blue-600";
        }

        toast.classList.remove("hidden");
        toast.classList.add("show");

        setTimeout(() => {
          toast.classList.remove("show");
          setTimeout(() => toast.classList.add("hidden"), 300);
        }, 3000);
      }

      // Setup event listeners
      function setupEventListeners() {
        // Cart toggle
        cartButton.addEventListener("click", () => {
          cartSidebar.classList.toggle("translate-x-full");
          cartSidebar.classList.toggle("translate-x-0");
        });

        closeCart.addEventListener("click", () => {
          cartSidebar.classList.add("translate-x-full");
          cartSidebar.classList.remove("translate-x-0");
        });

        // Checkout button
        checkoutBtn.addEventListener("click", () => {
          if (cart.length === 0) return;

          let message = "Olá, gostaria de fazer o seguinte pedido:\n\n";
          let subtotal = 0;

          cart.forEach((item) => {
            const price = item.product.hasDiscount
              ? item.product.discountPrice
              : item.product.price;
            const itemTotal = price * item.quantity;
            subtotal += itemTotal;

            message += `- ${item.product.name} (${
              item.quantity
            }x) - R$ ${itemTotal.toFixed(2).replace(".", ",")}\n`;
          });

          const shipping =
            subtotal >= FREE_SHIPPING_THRESHOLD ? 0 : SHIPPING_FEE;
          const total = subtotal + shipping;

          message += `\nSubtotal: R$ ${subtotal
            .toFixed(2)
            .replace(".", ",")}\n`;
          message += `Frete: ${
            shipping === 0
              ? "Grátis"
              : `R$ ${shipping.toFixed(2).replace(".", ",")}`
          }\n`;
          message += `Total: R$ ${total.toFixed(2).replace(".", ",")}\n\n`;
          message +=
            "Por favor, confirme a disponibilidade e o prazo de entrega.";

          const encodedMessage = encodeURIComponent(message);
          window.open(
            `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`,
            "_blank"
          );
        });

        // Search functionality
        searchInput.addEventListener("input", () => {
          const searchTerm = searchInput.value.toLowerCase();
          clearSearch.classList.toggle("hidden", searchTerm === "");

          if (searchTerm === "") {
            renderProducts(products);
            return;
          }

          const filtered = products.filter(
            (product) =>
              product.name.toLowerCase().includes(searchTerm) ||
              product.category.toLowerCase().includes(searchTerm)
          );

          renderProducts(filtered);
        });

        clearSearch.addEventListener("click", () => {
          searchInput.value = "";
          clearSearch.classList.add("hidden");
          renderProducts(products);
        });

        // Filter panel toggle
        filterBtn.addEventListener("click", () => {
          filterPanel.classList.toggle("hidden");
        });

        // Categories dropdown toggle
        categoriesBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          categoriesDropdown.classList.toggle("hidden");
        });

        // Close categories dropdown when clicking outside
        document.addEventListener("click", (e) => {
          if (
            !categoriesDropdown.contains(e.target) &&
            e.target !== categoriesBtn
          ) {
            categoriesDropdown.classList.add("hidden");
          }
        });

        // User modal toggle
        userBtn.addEventListener("click", () => {
          userModal.classList.remove("hidden");
        });

        closeUserModal.addEventListener("click", () => {
          userModal.classList.add("hidden");
        });

        // Close modals when clicking outside
        window.addEventListener("click", (e) => {
          if (e.target === userModal) {
            userModal.classList.add("hidden");
          }
        });
      }

      // Expose functions to global scope for inline event handlers
      window.addToCart = addToCart;
      window.updateQuantity = updateQuantity;
      window.removeFromCart = removeFromCart;
    </script>
  </body>
</html>
